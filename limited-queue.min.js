function createQueue(n,e,r){void 0===r&&(r=e);var u=0,t=async.queue(function(e,r){n.call({},e,r,u)},e),a=t.push;t.push=function(n,e){var t=u+1;return t>r?void(e&&e("Cannot save data because currentTaskCount "+t+" > maxTaskCount "+r)):(u=t,void a(n,e))},t.finaldrain=void 0;var i,o=function(){i&&i(u),u>=r&&t.finaldrain&&t.finaldrain(u)};return t.drain=o,Object.defineProperty(t,"drain",{set:function(n){i=n},get:function(){return o}}),t.currentTaskCount=void 0,Object.defineProperty(t,"currentTaskCount",{get:function(){return u}}),t}var async=require("async");module.exports={queue:createQueue};